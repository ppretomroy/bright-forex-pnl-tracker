<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrightTrading Software - Theme Toggle with Search</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap');
        
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Hind Siliguri", sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
        }

        h1 {
            color: var(--primary-color);
        }

        nav .btn {
            background-color: var(--button-bg);
            color: var(--button-text);
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: "Hind Siliguri", sans-serif;
        }

        nav .btn:hover {
            background-color: var(--button-hover-bg);
        }

        .form-section {
            margin-top: 30px;
        }

        h2 {
            margin-bottom: 20px;
            color: var(--text-color);
        }

        form {
            background-color: var(--form-bg);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: var(--text-color);
        }

        input, select {
            width: 100%;
            padding: 10px;
            background-color: var(--input-bg);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            color: var(--text-color);
        }

        input::placeholder, select {
            color: var(--placeholder-color);
        }

        button.submit-btn {
            background-color: var(--button-bg);
            color: white;
            padding: 10px;
            border: none;
            border-radius: 5px;
            width: 100%;
            cursor: pointer;
        }

        button.submit-btn:hover {
            background-color: var(--button-hover-bg);
        }

        /* Table Styles */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background-color: var(--table-header-bg);
            color: var(--table-header-text);
        }

        td {
            color: var(--text-color);
        }

        /* Light Theme */
        body.light {
            --primary-color: #006239;
            --text-color: #1c1c1c;
            --button-bg: #006239;
            --button-hover-bg: #1e7c52;
            --button-text: #fff;
            --form-bg: #f9f9f9;
            --border-color: #ddd;
            --input-bg: #fff;
            --placeholder-color: #aaa;
            --table-header-bg: #f0f0f0;
            --table-header-text: #333;
            background-color: #fff;
            color: #1c1c1c;
        }

        /* Dark Theme */
        body.dark {
            --primary-color: #2ba16e;
            --text-color: #f0f0f0;
            --button-bg: #006239;
            --button-hover-bg: #1e7c52;
            --button-text: #fff;
            --form-bg: #2b2b2b;
            --border-color: #444;
            --input-bg: #3a3a3a;
            --placeholder-color: #aaa;
            --table-header-bg: #333;
            --table-header-text: #fff;
            background-color: #1c1c1c;
            color: #f0f0f0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .form-section {
                margin-top: 15px;
            }
            h2 {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body class="dark"> <!-- Default to dark theme -->
    <div class="container">
        <header>
            <h1>ব্রাইট ফরেক্স ট্রেডিং</h1>
            <nav>
                <a href="index.html">
                    <button class="btn">তথ্য সার্ভমিট করুন</button>
                </a>
                <a href="check-pnl.html">
                    <button class="btn">তথ্য বিস্তারিত দেখুন</button>
                </a>
            </nav>
            <button class="btn" id="theme-toggle">Toggle Theme</button>
        </header>

        <div class="search-bar" style="margin-top: 20px;">
            <input type="text" id="search-input" placeholder="Search for trades..." onkeyup="filterTable()" style="width: 100%; padding: 10px;">
        </div>

        <!-- Table for showing data -->
        <table id="data-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Day</th>
                    <th>Market</th>
                    <th>Order</th>
                    <th>Lot</th>
                    <th>Open Price</th>
                    <th>Risk/Reward Ratio</th>
                    <th>TP</th>
                    <th>SL</th>
                    <th>PnL/USD</th>
                    <th>Status</th>
                    <th>User</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data from Google Sheets will be inserted here -->
            </tbody>
        </table>

        <script>
            // Your Google Sheets ID (from the URL of your published Google Sheet)
            const sheetId = '1gJDpYz5bMV6EkuOXR0bRQMoi_L_ome_DP77dEdIW6DM'; // Replace with your actual sheet ID

            // Your Google API key
            const apiKey = 'AIzaSyBvShpNn-4av3KWuQuUdmhl3S54rw2JFZY'; // Replace with your actual API key

            // The range of data you want to retrieve (e.g., 'Sheet1!A1:M100')
            const range = 'Demo Responses!B1:N100000'; // Adjust the range based on your sheet

            // Google Sheets API URL
            const url = `https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${range}?key=${apiKey}`;

            // Function to fetch data from Google Sheets
            function fetchGoogleSheetData() {
                fetch(url)
                    .then(response => response.json())
                    .then(data => populateTable(data.values))
                    .catch(error => console.error('Error fetching data:', error));
            }

            // Function to populate the HTML table with Google Sheets data
            function populateTable(data) {
                const tableBody = document.querySelector('#data-table tbody');
                tableBody.innerHTML = ''; // Clear existing table rows

                // Iterate over each row in the Google Sheet data
                data.forEach((row, index) => {
                    // Skip the first row if it's the header
                    if (index === 0) return;

                    // Create a new row for the table
                    const tr = document.createElement('tr');

                    // Add table cells for each column in the row
                    row.forEach(cell => {
                        const td = document.createElement('td');
                        td.textContent = cell || ''; // Handle empty cells
                        tr.appendChild(td);
                    });

                    // Append the new row to the table body
                    tableBody.appendChild(tr);
                });
            }

            // Call the fetch function when the page loads
            document.addEventListener('DOMContentLoaded', fetchGoogleSheetData);

            // Function to filter the table rows based on search input
            function filterTable() {
                var input = document.getElementById("search-input");
                var filter = input.value.toLowerCase();
                var table = document.getElementById("data-table");
                var rows = table.getElementsByTagName("tr");

                for (var i = 1; i < rows.length; i++) { // Start from 1 to skip header row
                    var cells = rows[i].getElementsByTagName("td");
                    var match = false;

                    for (var j = 0; j < cells.length; j++) {
                        // If any cell in the row contains the search query, mark as match
                        if (cells[j].textContent.toLowerCase().indexOf(filter) > -1) {
                            match = true;
                            break;
                        }
                    }

                    // Display the row if a match is found, hide it otherwise
                    rows[i].style.display = match ? "" : "none";
                }
            }

            // Theme toggle functionality
            const themeToggleBtn = document.getElementById('theme-toggle');
            const body = document.body;

            themeToggleBtn.addEventListener('click', () => {
                body.classList.toggle('dark');
                body.classList.toggle('light');
            });
        </script>

    </div>
</body>
</html>
